(window.webpackJsonp=window.webpackJsonp||[]).push([["submitorder"],{2592:function(e,t,i){},"28d7":function(e,t,i){function s(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}var r,o;e.exports=(o={},s.m=r={0:function(e,t,i){"use strict";function s(e,t,i,s,r,o,a,c){var n,d="function"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=i,d._compiled=!0),s&&(d.functional=!0),o&&(d._scopeId="data-v-"+o),a?(n=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},d._ssrRegister=n):r&&(n=c?function(){r.call(this,this.$root.$options.shadowRoot)}:r),n)if(d.functional){d._injectStyles=n;var l=d.render;d.render=function(e,t){return n.call(t),l(e,t)}}else{var u=d.beforeCreate;d.beforeCreate=u?[].concat(u,n):[n]}return{exports:e,options:d}}i.d(t,"a",(function(){return s}))},11:function(e,t){e.exports=i("1932")},22:function(e,t){e.exports=i("a857")},4:function(e,t){e.exports=i("b4e0")},88:function(e,t,i){"use strict";function s(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"el-switch",class:{"is-disabled":e.switchDisabled,"is-checked":e.checked},attrs:{role:"switch","aria-checked":e.checked,"aria-disabled":e.switchDisabled},on:{click:function(t){return t.preventDefault(),e.switchValue(t)}}},[i("input",{ref:"input",staticClass:"el-switch__input",attrs:{type:"checkbox",id:e.id,name:e.name,"true-value":e.activeValue,"false-value":e.inactiveValue,disabled:e.switchDisabled},on:{change:e.handleChange,keydown:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.switchValue(t):null}}}),e.inactiveIconClass||e.inactiveText?i("span",{class:["el-switch__label","el-switch__label--left",e.checked?"":"is-active"]},[e.inactiveIconClass?i("i",{class:[e.inactiveIconClass]}):e._e(),!e.inactiveIconClass&&e.inactiveText?i("span",{attrs:{"aria-hidden":e.checked}},[e._v(e._s(e.inactiveText))]):e._e()]):e._e(),i("span",{ref:"core",staticClass:"el-switch__core",style:{width:e.coreWidth+"px"}}),e.activeIconClass||e.activeText?i("span",{class:["el-switch__label","el-switch__label--right",e.checked?"is-active":""]},[e.activeIconClass?i("i",{class:[e.activeIconClass]}):e._e(),!e.activeIconClass&&e.activeText?i("span",{attrs:{"aria-hidden":!e.checked}},[e._v(e._s(e.activeText))]):e._e()]):e._e()])}i.r(t),s._withStripped=!0;var r=i(4),o=i.n(r),a=i(22),c=i.n(a),n=i(11),d=i.n(n),l={name:"ElSwitch",mixins:[c()("input"),d.a,o.a],inject:{elForm:{default:""}},props:{value:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},width:{type:Number,default:40},activeIconClass:{type:String,default:""},inactiveIconClass:{type:String,default:""},activeText:String,inactiveText:String,activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},id:String},data:function(){return{coreWidth:this.width}},created:function(){~[this.activeValue,this.inactiveValue].indexOf(this.value)||this.$emit("input",this.inactiveValue)},computed:{checked:function(){return this.value===this.activeValue},switchDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{checked:function(){this.$refs.input.checked=this.checked,(this.activeColor||this.inactiveColor)&&this.setBackgroundColor(),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[this.value])}},methods:{handleChange:function(){var e=this,t=this.checked?this.inactiveValue:this.activeValue;this.$emit("input",t),this.$emit("change",t),this.$nextTick((function(){e.$refs.input.checked=e.checked}))},setBackgroundColor:function(){var e=this.checked?this.activeColor:this.inactiveColor;this.$refs.core.style.borderColor=e,this.$refs.core.style.backgroundColor=e},switchValue:function(){this.switchDisabled||this.handleChange()},getMigratingConfig:function(){return{props:{"on-color":"on-color is renamed to active-color.","off-color":"off-color is renamed to inactive-color.","on-text":"on-text is renamed to active-text.","off-text":"off-text is renamed to inactive-text.","on-value":"on-value is renamed to active-value.","off-value":"off-value is renamed to inactive-value.","on-icon-class":"on-icon-class is renamed to active-icon-class.","off-icon-class":"off-icon-class is renamed to inactive-icon-class."}}}},mounted:function(){this.coreWidth=this.width||40,(this.activeColor||this.inactiveColor)&&this.setBackgroundColor(),this.$refs.input.checked=this.checked}},u=i(0),p=Object(u.a)(l,s,[],!1,null,null,null);p.options.__file="packages/switch/src/component.vue";var h=p.exports;h.install=function(e){e.component(h.name,h)},t.default=h}},s.c=o,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(i,r,function(t){return e[t]}.bind(null,r));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/dist/",s(s.s=88))},"3fd8":function(e,t,i){function s(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,s),t.l=!0,t.exports}var r,o;e.exports=(o={},s.m=r={0:function(e,t,i){"use strict";function s(e,t,i,s,r,o,a,c){var n,d="function"==typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=i,d._compiled=!0),s&&(d.functional=!0),o&&(d._scopeId="data-v-"+o),a?(n=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},d._ssrRegister=n):r&&(n=c?function(){r.call(this,this.$root.$options.shadowRoot)}:r),n)if(d.functional){d._injectStyles=n;var l=d.render;d.render=function(e,t){return n.call(t),l(e,t)}}else{var u=d.beforeCreate;d.beforeCreate=u?[].concat(u,n):[n]}return{exports:e,options:d}}i.d(t,"a",(function(){return s}))},4:function(e,t){e.exports=i("b4e0")},79:function(e,t,i){"use strict";function s(){var e=this,t=e.$createElement;return(e._self._c||t)(e._elTag,{tag:"component",staticClass:"el-radio-group",attrs:{role:"radiogroup"},on:{keydown:e.handleKeydown}},[e._t("default")],2)}i.r(t),s._withStripped=!0;var r=i(4),o=i.n(r),a=Object.freeze({LEFT:37,UP:38,RIGHT:39,DOWN:40}),c={name:"ElRadioGroup",componentName:"ElRadioGroup",inject:{elFormItem:{default:""}},mixins:[o.a],props:{value:{},size:String,fill:String,textColor:String,disabled:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},_elTag:function(){return(this.$vnode.data||{}).tag||"div"},radioGroupSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size}},created:function(){var e=this;this.$on("handleChange",(function(t){e.$emit("change",t)}))},mounted:function(){var e=this.$el.querySelectorAll("[type=radio]"),t=this.$el.querySelectorAll("[role=radio]")[0];![].some.call(e,(function(e){return e.checked}))&&t&&(t.tabIndex=0)},methods:{handleKeydown:function(e){var t=e.target,i="INPUT"===t.nodeName?"[type=radio]":"[role=radio]",s=this.$el.querySelectorAll(i),r=s.length,o=[].indexOf.call(s,t),c=this.$el.querySelectorAll("[role=radio]");switch(e.keyCode){case a.LEFT:case a.UP:e.stopPropagation(),e.preventDefault(),0===o?(c[r-1].click(),c[r-1].focus()):(c[o-1].click(),c[o-1].focus());break;case a.RIGHT:case a.DOWN:o===r-1?(e.stopPropagation(),e.preventDefault(),c[0].click(),c[0].focus()):(c[o+1].click(),c[o+1].focus())}}},watch:{value:function(){this.dispatch("ElFormItem","el.form.change",[this.value])}}},n=i(0),d=Object(n.a)(c,s,[],!1,null,null,null);d.options.__file="packages/radio/src/radio-group.vue";var l=d.exports;l.install=function(e){e.component(l.name,l)},t.default=l}},s.c=o,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(i,r,function(t){return e[t]}.bind(null,r));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/dist/",s(s.s=79))},"5e98":function(e,t,i){},"7fa1":function(e,t,i){},"8c74":function(e,t,i){},"8cf2":function(e,t,i){"use strict";var s=i("8c74");i.n(s).a},"9b65":function(e,t,i){"use strict";var s={name:"OrderTabs",data:function(){return{sliderWidth:0,lineWidth:0,beginClick:!1,chooseIndex:"0"}},props:{tabData:Array},methods:{choose:function(e,t){this.$emit("selectOrderType",e,t),this.sliderWidth=this.$refs["ref+".concat(e)][0].offsetLeft,this.lineWidth=this.$refs["ref+".concat(e)][0].offsetWidth,this.beginClick=!0,this.chooseIndex=e}}},r=(i("a86e"),i("e90a")),o=Object(r.a)(s,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"orderTabs"},[i("ul",{class:{on:e.beginClick}},[e._l(e.tabData,(function(t,s){return i("li",{key:s,ref:"ref+"+s,refInFor:!0,class:{on:e.chooseIndex==s},on:{click:function(i){return e.choose(s,t.type)}}},[i("p",[e._v(e._s(t.name)+" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.count,expression:"item.count"}]},[e._v(e._s(t.count))])])])})),i("span",{staticClass:"orderLine",style:{transform:"translateX("+e.sliderWidth+"px)",width:e.lineWidth+"px"}})],2)])}),[],!1,null,"41080b36",null);t.a=o.exports},a525:function(e,t,i){"use strict";i.r(t),i("af82"),i("c354"),i("f4a0"),i("3a20"),i("b3f9"),i("7267"),i("ec4a"),i("d780"),i("9a14");var s=i("2549"),r=(i("2548"),i("9f02"),i("daa7")),o=i.n(r),a=(i("a737"),i("785d")),c=i.n(a),n=(i("c38f"),i("a3cf")),d=i.n(n),l=(i("1d17"),i("7c6d")),u=i.n(l),p=(i("1841"),i("9504")),h=i.n(p),_=(i("e6e3"),i("8807")),m=i.n(_),f=(i("8b9a"),i("f87c")),v=i.n(f),g=(i("b398"),i("a742")),b=i.n(g),k=(i("7fa1"),i("3fd8")),y=i.n(k),x=(i("b759"),i("9c26")),w=i.n(x),C=(i("1fcc"),i("78de")),$=i.n(C),A=(i("5e98"),i("28d7")),I=i.n(A),L=i("0261"),O=i("842d"),D=i("a3be"),P=i("ee23"),V=i("9b65"),T=i("d868"),G=i("623d");L.default.use(d.a).use(u.a).use(h.a).use(m.a).use(v.a).use(b.a).use(y.a).use(w.a).use($.a).use(I.a);var S={name:"SubmitOrder",components:{GroupVipCard:T.a,Coupon:O.a,NavBar:V.a},data:function(){return{showIndex:-1,showAdd:!1,phoneAreaOptions:[],phoneAreaValue:"+86",AddressAreaOptions:[],titleType:1,selectedAddressCode:[],chooseTextData:[],swAddresslistshow:5,currentAddressIndex:0,showPayOk:!1,noticeWechatPay:!1,order_item_result:{order_list:[],all_total_amount:0},showPayError:!1,tabData:[{name:"可用",type:"a"},{name:"不可用",type:""}],groupCard:[],ticketForm:{},ticketFormRules:{name:[{required:!0,message:"不能为空"}],phone:[{required:!0,message:"不能为空"}],card_no:[{required:!0,message:"不能为空"}],order_date:[{required:!0,message:"不能为空"}],email:[{required:!0,message:"不能为空"}]},userInfo:{name:"",phone:"",idCard:"",playDate:"",email:""},radio2:3,options2:[],selectedOptions2:[],type:null,cartIds:null,cartList:[],addressList:[],address_id:"",userAddress:{},show_addInvoice:!1,show_addInvoice_model:!1,invoice_info:{type:1,title_type:"",title:"",phone:"",email:"",content:"商品明细",identity_number:""},invoice_info_rules:{type:[{required:!0,message:"请选择"}],title_type:[{required:!0,message:"请选择"}],title:[{required:!0,message:"不能为空"}],phone:[{required:!0,message:"不能为空"}],email:[{required:!0,message:"不能为空"}],content:[{required:!0,message:"不能为空"}],identity_number:[{required:!0,message:"不能为空"}]},shortage:["缺货商品退款，其他商品继续配送","有缺货直接取消订单且退款","缺货时电话与我沟通"],vModelshortage:0,groupVipList:[],checkGroupCode:[],checkGroupVip:!1,checkDiscount:!1,reduceDiscountAmount:0,discountCodeUse:!0,groupVipPassword:"",show_no_data:!1,submitOrderLoading:!1,default_group_ids:[],default_group:{},chooseCouponId:"",formUserData:{is_default:!1,name:"",address:"",phone:"",id:""},showDelToast:!1,delAddressId:0,chooseDiscountId:0,memberInfo:{}}},watch:{chooseCouponId:function(){},show_addInvoice:function(e){e&&(this.show_addInvoice_model=!0)},groupVipList:function(e){e&&0<e.length?this.show_no_data=!1:this.show_no_data=!0},checkGroupVip:function(e){e?(this.getMember(),this.getGroupVipUseList()):this.$message.warning("已取消团体卡支付")}},computed:{getCartList_allCount_totalPrice:function(){var e=this,t={count:0,totalPrice:0,total_freight:0,total_coupon:0};return 0<this.cartList.length&&this.cartList.forEach((function(i,s){var r=0;3!=e.type&&5!=e.type&&4!=e.type||(i.total_freight=0),i.products.forEach((function(e){t.count+=parseInt(e.cart_product_num),t.totalPrice+=e.sale_price*e.cart_product_num,r+=e.sale_price*e.cart_product_num})),e.cartList[s].oneOrderPrice=r,i.member_coupon_id&&i.couponInfoList.forEach((function(e){i.member_coupon_id==e.member_coupon_id&&(t.total_coupon+=Number(e.value))})),t.total_freight+=i.total_freight})),t},getMerchantIds:function(){var e=[];return this.cartList.forEach((function(t){e.push(t.id)})),e},getGroupvipMoney:function(){var e=this,t=0;return this.checkGroupCode.forEach((function(i){e.groupVipList.forEach((function(e){i==e.code&&(t+=Number(e.balance))}))})),"number"==typeof t&&(t=Number(t.toString().match(/^\d+(?:\.\d{0,2})?/))),0===t&&(t="0.00"),t}},created:function(){this.type=this.$route.params.type,this.cartIds=this.$storage.get("cartIds")},mounted:function(){this.getAddressList(),this.cartIds&&0<this.cartIds.length?this.getCartOrderList():this.getLocalOrderlist();var e=JSON.parse(sessionStorage.getItem("default-group-vip"))||{};this.default_group=e,this.default_group_ids=e.use_merchant_id||[];var t=JSON.parse(JSON.stringify(G).replace(/text/g,"label"));this.AddressAreaOptions=t},methods:{getMember:function(){var e=this;this.$ajax.post(D.ab,{},(function(t){e.memberInfo=t.data}))},changeCouponChoose:function(e,t){var i=this,s=this.cartList[e].couponInfoList;this.cartList[e].member_coupon_id?this.cartList[e].member_coupon_id===t?setTimeout((function(){s.forEach((function(s){s.member_coupon_id===t&&(s.checked=!1,i.$set(i.cartList[e],"member_coupon_id",""))}))}),100):setTimeout((function(){s.forEach((function(s){s.member_coupon_id===t?(s.checked=!0,i.$set(i.cartList[e],"member_coupon_id",t)):s.checked=!1}))}),100):this.$set(this.cartList[e],"member_coupon_id",t)},editor:function(){this.formUserData={is_default:!1,name:"",address:"",phone:"",id:""},this.selectedAddressCode=[],this.chooseTextData=[];var e=this.addressList[this.currentAddressIndex],t=[e.province_code,e.city_code,e.district_code];this.formUserData.name=e.contact_name,this.formUserData.address=e.address,this.formUserData.phone=e.contact_tel,this.formUserData.id=e.id,this.formUserData.is_default=1==e.is_default,this.selectedAddressCode=t,this.chooseTextData[0]=e.province,this.chooseTextData[1]=e.city,this.chooseTextData[2]=e.district,this.titleType=2,this.showAdd=!0},chooseAddressArea:function(e){for(var t=this.AddressAreaOptions,i=[],s=0;s<t.length;s++)if(t[s].value===e[0]){i.push(t[s].label);for(var r=t[s].children,o=0;o<r.length;o++)if(r[o].value===e[1]){i.push(r[o].label);for(var a=r[o].children,c=0;c<a.length;c++)if(a[c].value===e[2]){i.push(a[c].label);break}break}break}this.chooseTextData=i},confirmAddAddress:function(){var e=this;1==this.titleType?this.$ajax.post(D.c,{contact_name:this.formUserData.name,contact_tel:this.formUserData.phone,province_code:this.selectedAddressCode[0],city_code:this.selectedAddressCode[1],district_code:this.selectedAddressCode[2],province:this.chooseTextData[0],city:this.chooseTextData[1],district:this.chooseTextData[2],address:this.formUserData.address,is_default:this.formUserData.is_default},(function(t){200===t.errcode?(e.getAddressList(),e.currentAddressIndex=0):e.$message.error(t.errmsg)})):this.$ajax.post(D.i,{address_id:this.formUserData.id,contact_name:this.formUserData.name,contact_tel:this.formUserData.phone,province_code:this.selectedAddressCode[0],city_code:this.selectedAddressCode[1],district_code:this.selectedAddressCode[2],province:this.chooseTextData[0],city:this.chooseTextData[1],district:this.chooseTextData[2],address:this.formUserData.address,is_default:this.formUserData.is_default},(function(t){200===t.errcode?(e.getAddressList(),e.formUserData.is_default&&(e.currentAddressIndex=0)):e.$message.error(t.errmsg)}))},deleteAddress:function(e){var t=this;this.$ajax.post(D.e,{address_id:e},(function(e){200===e.errcode?(t.$message.success("删除地址成功"),t.getAddressList()):t.$message.error(e.errmsg)}))},getLocalOrderlist:function(){var e=this;this.cartList=this.$storage.get("item_product_info"),this.cartList.forEach((function(t,i){e.getCoupon(t,i)})),this.calDiscount(),this.checkCutoffTime(),this.copyProductdata()},getCartOrderList:function(){var e=this;this.$ajax.post(D.t,{cartIds:this.cartIds},(function(t){e.cartList=t.data.list,e.cartList.forEach((function(t,i){e.getCoupon(t,i)})),e.calDiscount(),e.checkCutoffTime(),e.copyProductdata()}))},copyProductdata:function(){var e=[];this.cartList.forEach((function(t,i){var s={};s.merchant_id=t.id,s.product_list=[],t.products.forEach((function(e){var t={};t.product_id=e.product_id,t.num=e.cart_product_num,t.sale_price=e.sale_price,s.product_list.push(t)})),e.push(s)})),3==this.type||5==this.type||4==this.type||this.getfreight(e)},getfreight:function(e){var t=this;this.$ajax.post(D.kb,{address_id:this.userAddress.id,product_data:e},(function(e){200===e.errcode?e.data.product_data.forEach((function(e,i){t.$set(t.cartList[i],"total_freight",parseFloat(e.max_freight))})):t.$message.error(e.errmsg)}))},getCoupon:function(e){var t=this,i=[],s=e.id,r=e.products;if(0<r.length){var o=[];r.forEach((function(e){o.push({product_id:e.product_id,num:e.cart_product_num,sale_price:e.sale_price})})),i.push({merchant_id:s,product_list:o})}t.$ajax.post(P.a,i,(function(i){var s=i.data;0<s.length&&(s[0].checked=!0,t.$set(e,"couponInfoList",s),t.$set(e,"member_coupon_id",s[0].member_coupon_id))}))},getAddressList:function(){var e=this;this.$ajax.post(D.h,{},(function(t){if(!t.data)return c.a.error(t.errmsg),!1;0<t.data.list.length?(e.addressList=t.data.list,e.userAddress=e.addressList[0]):o.a.confirm("暂未添加收货地址，请去添加收货地址？","温馨提示",{closeOnClickModal:!1,showClose:!1,showCancelButton:!1}).then((function(){e.$router.push("/user/address")})).catch((function(){}))}))},getGroupVipUseList:function(){var e=this;this.$ajax.post(D.dc,{pageNumber:1,pageSize:10,merchant_id:this.getMerchantIds},(function(t){e.groupVipList=t.data.list,e.groupVipList.forEach((function(t){1==t.is_default&&e.checkGroupCode.push(t.code)}))}))},chooseAddress:function(e){this.currentAddressIndex=e,this.userAddress=this.addressList[e],this.copyProductdata()},calDiscount:function(){var e=this;this.$ajax.post(D.m,{cart_data:this.cartList,merchant_id:this.getMerchantIds},(function(t){200===t.errcode?t.data.checkDiscount&&(e.cartList=t.data.cartData,e.checkDiscount=!0,e.chooseDiscountId=t.data.discountId,e.reduceDiscountAmount=t.data.reduceAmount,e.discountCodeUse=t.data.codeUse):e.$message.error(t.errmsg)}))},checkCutoffTime:function(){var e=this;this.$ajax.post(D.x,{merchant_id:this.getMerchantIds},(function(t){if(200===t.errcode&&t.data.checkCutoff){var i=e.$createElement,s=[];t.data.cutoffMsg.forEach((function(e,t){s.push(i("p",null,e.name+"："+e.text+"；"))})),o.a.confirm(i("div",null,s),"温馨提示",{showClose:!1,showCancelButton:!1})}}))},cancleAddInvoice:function(){this.show_addInvoice_model=!1,this.show_addInvoice=!1,this.$refs.invoice_info_form.resetFields(),this.invoice_info.type=1},confirmAddInvoice:function(){var e=this;this.show_addInvoice_model=!0,this.$refs.invoice_info_form.validate((function(t){t&&(e.show_addInvoice_model=!1)}))},moveIn:function(e){this.showIndex=e},moveLeave:function(){this.showIndex=-1},addAddress:function(){this.formUserData={is_default:!1,name:"",address:"",phone:"",id:""},this.selectedAddressCode=[],this.chooseTextData=[],this.titleType=1,this.showAdd=!0},getOrderDetails:function(e){var t=this;this.$ajax.post(D.mc,{order_ids:e},(function(e){200==e.errcode?(t.order_item_result=e.data,e.data.all_total_amount==e.data.all_already_amount?(t.$storage.remove("order_id"),t.showPayOk=!0):t.noticeWechatPay=!0):c.a.error(e.errmsg)}))},confirmWeachatPay:function(){this.$router.push({name:"OrderPay"})},submitOrderTick:function(){var e=this;return this.checkGroupVip&&"0.00"==this.getGroupvipMoney?0<!this.groupVipList.length?void c.a.error("没有可用的团体会员卡，请取消选择团体会员支付"):(c.a.warning("请选择团体会员卡"),!1):this.checkGroupVip&&!this.groupVipPassword?(c.a.warning("请输入团体会员卡支付密码"),!1):void this.$refs.ticketform.validate((function(t){if(t)if(e.checkGroupVip){var i=e.cartList[0];e.submitOrderLoading=!0,e.$ajax.post(D.vc,{product_id:i.products[0].product_id,sku_id:i.products[0].sku_id,sale_price:i.products[0].sale_price,marking_price:i.products[0].marking_price,product_num:i.products[0].cart_product_num,member_day:"",ticket_order:Object(s.a)({},e.ticketForm),need_invoice:e.show_addInvoice?1:0,invoice_info:e.invoice_info,is_member_code:e.checkGroupVip?1:0,member_code:e.checkGroupCode,member_remark:i.remark||"",corporate_password:e.groupVipPassword},(function(t){e.submitOrderLoading=!1,200==t.errcode?(e.$storage.set("order_id",[t.data.order_id]),e.getOrderDetails([t.data.order_id])):c.a.error(t.errmsg)}))}else{var r=e.cartList[0];e.submitOrderLoading=!0,e.$ajax.post(D.vc,{product_id:r.products[0].product_id,sku_id:r.products[0].sku_id,sale_price:r.products[0].sale_price,marking_price:r.products[0].marking_price,product_num:r.products[0].cart_product_num,member_day:"",ticket_order:Object(s.a)({},e.ticketForm),need_invoice:e.show_addInvoice?1:0,invoice_info:e.invoice_info,member_remark:r.remark||""},(function(t){if(e.submitOrderLoading=!1,200!=t.errcode)return c.a.error(t.errmsg),!1;c.a.success("提交成功"),e.$store.dispatch("cart/addcart"),setTimeout((function(){e.$storage.set("order_id",[t.data.order_id]),e.$router.push({name:"OrderPay"})}),1e3)}))}else c.a.error("请填写票务信息")}))},submitOrderWenYu:function(){var e=this;return this.checkGroupVip&&"0.00"==this.getGroupvipMoney?0<!this.groupVipList.length?void c.a.error("没有可用的团体会员卡，请取消选择团体会员支付"):(c.a.warning("请选择团体会员卡"),!1):this.checkGroupVip&&!this.groupVipPassword?(c.a.warning("请输入团体会员卡支付密码"),!1):void this.$refs.ticketform.validate((function(t){if(t)if(e.checkGroupVip){var i=e.cartList[0];e.submitOrderLoading=!0,e.$ajax.post(D.wc,{product_id:i.products[0].product_id,sku_id:i.products[0].sku_id,sale_price:i.products[0].sale_price,marking_price:i.products[0].marking_price,product_num:i.products[0].cart_product_num,member_day:"",mobile:e.ticketForm.phone,need_invoice:e.show_addInvoice?1:0,invoice_info:e.invoice_info,is_member_code:e.checkGroupVip?1:0,member_code:e.checkGroupCode,member_remark:i.remark||"",corporate_password:e.groupVipPassword},(function(t){e.submitOrderLoading=!1,200==t.errcode?(e.$storage.set("order_id",[t.data.order_id]),e.getOrderDetails([t.data.order_id])):c.a.error(t.errmsg)}))}else{var s=e.cartList[0];e.submitOrderLoading=!0,e.$ajax.post(D.wc,{product_id:s.products[0].product_id,sku_id:s.products[0].sku_id,sale_price:s.products[0].sale_price,marking_price:s.products[0].marking_price,product_num:s.products[0].cart_product_num,member_day:"",mobile:e.ticketForm.phone,need_invoice:e.show_addInvoice?1:0,invoice_info:e.invoice_info,member_remark:s.remark||""},(function(t){if(e.submitOrderLoading=!1,200!=t.errcode)return c.a.error(t.errmsg),!1;c.a.success("提交成功"),e.$store.dispatch("cart/addcart"),setTimeout((function(){e.$storage.set("order_id",[t.data.order_id]),e.$router.push({name:"OrderPay"})}),1e3)}))}else c.a.error("请填写手机")}))},submitOrder:function(){var e=this;if(this.checkGroupVip&&"0.00"==this.getGroupvipMoney)return 0<!this.groupVipList.length?void c.a.error("没有可用的团体会员卡，请取消选择团体会员支付"):(c.a.warning("请选择团体会员卡"),!1);if(this.checkGroupVip&&!this.groupVipPassword)return c.a.warning("请输入团体会员卡支付密码"),!1;if(this.checkGroupVip&&this.checkDiscount&&!this.discountCodeUse)return c.a.warning("团体折扣优惠不可与团体会员卡同时使用，请取消使用团体卡"),!1;var t=this.checkDiscount?this.chooseDiscountId:"";if(this.checkGroupVip)if(this.cartIds&&0<this.cartIds.length){var i={},s=[];this.cartList.forEach((function(e,t){var i={},r=[],o=[];if(i.merchant_id=e.id,i.express_type=1,i.member_remark=e.remark||"",e.products.forEach((function(e){var t={};t.cart_id=e.cart_id,t.product_id=e.product_id,t.sku_id=e.sku_id,t.product_num=e.cart_product_num,t.activity_info={activity_type:e.activity_type||"",activity_id:e.cart_activity_id||""},r.push(t)})),e.member_coupon_id){var a={};a.member_coupon_id=e.member_coupon_id,o.push(a)}i.product_info=r,i.coupon_info=o,s.push(i)})),i.order_info=s,i.address_id=this.userAddress.id,i.shortage_processing=this.shortage[this.vModelshortage],i.invoice_info=this.invoice_info,i.is_member_code=this.checkGroupVip?1:0,i.need_invoice=this.show_addInvoice?1:0,i.member_code=this.checkGroupCode,i.corporate_password=this.groupVipPassword,i.discount_id=t,this.submitOrderLoading=!0,this.$ajax.post(D.Gb,i,(function(t){if(e.submitOrderLoading=!1,200!=t.errcode)return c.a.error(t.errmsg),!1;e.$storage.set("order_id",t.data.order_id),e.getOrderDetails(t.data.order_id)}),(function(t){e.submitOrderLoading=!1}))}else{var r=this.cartList[0],o=[];if(r.member_coupon_id){var a={};a.member_coupon_id=r.member_coupon_id,o.push(a)}this.submitOrderLoading=!0,this.$ajax.post(D.A,{address_id:this.userAddress.id,merchant_id:r.id,product_id:r.products[0].product_id,sku_id:r.products[0].sku_id,product_num:r.products[0].cart_product_num,member_remark:r.remark||"",coupon_info:o,activity_type:"",activity_id:"",invoice_info:this.invoice_info,is_member_code:this.checkGroupVip?1:0,need_invoice:this.show_addInvoice?1:0,member_code:this.checkGroupCode,corporate_password:this.groupVipPassword,discount_id:t},(function(t){e.submitOrderLoading=!1,200==t.errcode?(e.$storage.set("order_id",[t.data.order_id]),e.getOrderDetails([t.data.order_id])):c.a.error(t.errmsg)}))}else if(this.cartIds&&0<this.cartIds.length){var n={},d=[];this.cartList.forEach((function(e,t){var i={},s=[],r=[];if(i.merchant_id=e.id,i.express_type=1,i.member_remark=e.remark||"",e.products.forEach((function(e){var t={};t.cart_id=e.cart_id,t.product_id=e.product_id,t.sku_id=e.sku_id,t.product_num=e.cart_product_num,t.activity_info={activity_type:e.activity_type||"",activity_id:e.cart_activity_id||""},s.push(t)})),e.member_coupon_id){var o={};o.member_coupon_id=e.member_coupon_id,r.push(o)}i.product_info=s,i.coupon_info=r,d.push(i)})),n.order_info=d,n.address_id=this.userAddress.id,n.shortage_processing=this.shortage[this.vModelshortage],n.invoice_info=this.invoice_info,n.is_member_code=this.checkGroupVip?1:0,n.need_invoice=this.show_addInvoice?1:0,n.member_code=this.checkGroupCode,n.corporate_password=this.groupVipPassword,n.discount_id=t,this.submitOrderLoading=!0,this.$ajax.post(D.Gb,n,(function(t){if(e.submitOrderLoading=!1,200!=t.errcode)return c.a.error(t.errmsg),!1;c.a.success("提交成功"),e.$store.dispatch("cart/addcart"),setTimeout((function(){e.$storage.set("order_id",t.data.order_id),e.$router.push({name:"OrderPay"})}),1e3)}),(function(t){e.submitOrderLoading=!1}))}else{var l=this.cartList[0],u=[];if(l.member_coupon_id){var p={};p.member_coupon_id=l.member_coupon_id,u.push(p)}this.submitOrderLoading=!0,this.$ajax.post(D.A,{address_id:this.userAddress.id,merchant_id:l.id,product_id:l.products[0].product_id,sku_id:l.products[0].sku_id,product_num:l.products[0].cart_product_num,member_remark:l.remark||"",coupon_info:u,activity_type:"",activity_id:"",invoice_info:this.invoice_info,is_member_code:this.checkGroupVip?1:0,need_invoice:this.show_addInvoice?1:0,member_code:this.checkGroupCode,corporate_password:this.groupVipPassword,discount_id:t},(function(t){if(e.submitOrderLoading=!1,200!=t.errcode)return c.a.error(t.errmsg),!1;c.a.success("提交成功"),e.$store.dispatch("cart/addcart"),setTimeout((function(){e.$storage.set("order_id",[t.data.order_id]),e.$router.push({name:"OrderPay"})}),1e3)}))}}}},N=(i("8cf2"),i("e260"),i("e90a")),E=Object(N.a)(S,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"submitorderBox max-width margin-auto clearfix"},[1==e.type?s("div",{staticClass:"chooseAddress"},[s("p",{staticClass:"title"},[e._v("选择收货地址")]),s("ul",{staticClass:"addressSq clearfix"},e._l(e.addressList,(function(t,i){return s("li",{directives:[{name:"show",rawName:"v-show",value:i<e.swAddresslistshow,expression:"index<swAddresslistshow"}],key:i,class:{choose:i==e.currentAddressIndex},on:{click:function(t){return e.chooseAddress(i)},mouseover:function(t){return e.moveIn(i)},mouseleave:function(t){return e.moveLeave()}}},[s("div",{staticClass:"mainMess clearfix"},[s("span",{staticClass:"name"},[e._v(e._s(t.contact_name))]),s("span",{staticClass:"tel"},[e._v(e._s(t.contact_tel))])]),s("div",{staticClass:"addressBox"},[s("span",{staticClass:"addressValue"},[e._v(" "+e._s(t.province)+" "+e._s(t.city)+" "+e._s(t.district)+" "+e._s(t.address)+" ")]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.currentAddressIndex==i,expression:"currentAddressIndex == index"}],staticClass:"Btns"},[s("a",{staticClass:"bTn",attrs:{href:"javascript:void (0)"},on:{click:function(t){return e.editor()}}},[e._v("修改")]),s("a",{staticClass:"bTn",attrs:{href:"javascript:void (0)"},on:{click:function(i){e.delAddressId=t.id,e.showDelToast=!0}}},[e._v("删除")])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.is_default,expression:"item.is_default==1"}],staticClass:"is-default"},[e._v(" 默认地址 ")])])})),0),s("div",{staticClass:"actions clearfix"},[s("div",{staticClass:"mainred fl",on:{click:function(t){e.swAddresslistshow=100}}},[e._v("显示全部地址")]),s("router-link",{staticClass:"mainred fr",attrs:{to:"/user/address",tag:"div"}},[e._v("管理收货地址")]),s("div",{staticClass:"mainred fr",staticStyle:{"margin-right":"20px"},on:{click:function(t){return e.addAddress()}}},[e._v("添加收货地址")])],1)]):e._e(),s("div",{staticClass:"confirm-order-box",style:{marginTop:2==e.type||3==e.type?"0px":""}},[s("p",{staticClass:"o-title"},[e._v("确认订单信息")]),s("div",[e._m(0),e._l(e.cartList,(function(t,i){return s("div",{key:i,staticClass:"cart_store_book"},[s("div",{staticClass:"top_tag b-1px-b flex-row flex-y-center"},[s("div",{staticClass:"flex-grow-1 flex-y-center"},[s("span",{staticClass:"store-name"},[e._v(e._s(t.name))]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:-1<e.default_group_ids.indexOf(t.id)||1==e.default_group.scope_type,expression:"default_group_ids.indexOf(item.id)>-1 || default_group.scope_type==1"}],staticClass:"canUseGroupVipPay"},[s("span",{staticClass:"canUseIcon"}),e._v("可使用团体会员余额支付")])])]),e._l(t.products,(function(t,i){return s("div",{key:i,staticClass:"car-list-line-box b-1px-b-dashed"},[3==e.type?s("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"flex-grow-0 bookAcivity"},[e._v("会员日购买该商品可享8.8折")]):e._e(),s("div",{staticClass:"car-list flex-row flex-y-center"},[s("div",{staticClass:"flex-grow-0 flex-y-center goods li1"},[s("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"list-input-checkbox",attrs:{type:"checkbox"}}),s("i",{},[s("a",{attrs:{href:"/detail/"+t.product_id,target:"_blank"}},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.product_post,expression:"item2.product_post"}],attrs:{alt:""}})])]),s("a",{staticClass:"orderName",attrs:{href:"/detail/"+t.product_id,target:"_blank"}},[e._v(e._s(t.product_name))])]),s("div",{staticClass:"flex-grow-0 flex-col spec li2"},[e._l(t.sku_specs,(function(t){return s("div",{staticClass:"flex-x-center"},[e._v(" "+e._s(t.specs_key_name)+":"+e._s(t.specs_value_name)+" ")])})),s("div",{directives:[{name:"show",rawName:"v-show",value:0<!t.sku_specs.length,expression:"!item2.sku_specs.length>0"}],staticClass:"flex-x-center"},[e._v("暂无")])],2),s("div",{staticClass:"flex-grow-0 flex-x-center orderPrice li3"},[e._v(" ¥"+e._s(t.sale_price)),s("span",{staticClass:"line"},[e._v("¥"+e._s(t.market_price))])]),s("div",{staticClass:"flex-grow-0 flex-x-center flex-y-center orderCount li4"},[e._v(" "+e._s(t.cart_product_num)+" ")]),s("div",{staticClass:"flex-grow-0 flex-x-center totalparice li5"},[e._v(" ¥"+e._s(e._f("getPrice")(t.sale_price*t.cart_product_num))+" ")]),s("div",{staticClass:"flex-grow-0 flex-x-center other li6 "},[s("div",[1==t.status?s("div",{staticClass:"hover"},[e._v("待下单")]):2==t.status?s("div",{staticClass:"hover"},[e._v("已下单")]):3==t.status?s("div",{staticClass:"hover"},[e._v("库存不足")]):4==t.status?s("div",{staticClass:"hover"},[e._v("库存紧张")]):5==t.status||6==t.status?s("div",{staticClass:"hover"},[e._v("商品失效")]):s("div",[e._v("暂无")])])])])])})),s("div",{staticClass:"leave-massage"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.remark,expression:"item.remark"}],staticClass:"b-1px",attrs:{placeholder:"给商家留言",type:"text"},domProps:{value:t.remark},on:{input:function(i){i.target.composing||e.$set(t,"remark",i.target.value)}}})]),s("div",{directives:[{name:"show",rawName:"v-show",value:3!=e.type&&4!=e.type,expression:"type!=3 && type!=4"}]},[s("div",{staticClass:"leave-massage b-1px"},[s("span",{staticClass:"mainred",staticStyle:{"font-weight":"bold"}},[e._v("运费:￥"+e._s(t.total_freight||0))]),e._v(" "),s("span",{staticClass:"mainred",staticStyle:{"margin-left":"50px","margin-right":"30px","font-weight":"bold"}},[e._v("合计:￥"+e._s(e._f("getPrice")(t.total_freight+t.oneOrderPrice)))])])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.couponInfoList&&0<t.couponInfoList.length,expression:"item.couponInfoList && item.couponInfoList.length>0"}],staticClass:"coupon-box"},[s("p",{staticClass:"fenlei-title"},[e._v("优惠券")]),s("div",{staticClass:"clearfix list-box"},e._l(t.couponInfoList,(function(r,o){return s("div",{directives:[{name:"show",rawName:"v-show",value:Number(t.oneOrderPrice)>=Number(r.condition),expression:"(Number(item.oneOrderPrice)>=Number(item_coupon.condition))"}],key:o,staticClass:"coupon-list fl"},[s("label",[s("coupon",{attrs:{couponData:r}}),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:r.checked,expression:"item_coupon.checked"}],ref:"video"+r.member_coupon_id,refInFor:!0,attrs:{type:"checkbox",name:"coupon"},domProps:{checked:Array.isArray(r.checked)?-1<e._i(r.checked,null):r.checked},on:{click:function(t){return e.changeCouponChoose(i,r.member_coupon_id)},change:function(t){var i=r.checked,s=t.target,o=!!s.checked;if(Array.isArray(i)){var a=e._i(i,null);s.checked?a<0&&e.$set(r,"checked",i.concat([null])):-1<a&&e.$set(r,"checked",i.slice(0,a).concat(i.slice(a+1)))}else e.$set(r,"checked",o)}}})])],1)])})),0)])],2)}))],2)]),3==e.type?s("div",{staticClass:"ticketing-massage"},[s("p",{staticClass:"fenlei-title"},[e._v("票务信息")]),s("el-form",{ref:"ticketform",attrs:{"label-position":"left",rules:e.ticketFormRules,model:e.ticketForm,"label-width":"70px"}},[s("el-form-item",{attrs:{label:"姓名",prop:"name"}},[s("el-input",{attrs:{placeholder:"请输入"},model:{value:e.ticketForm.name,callback:function(t){e.$set(e.ticketForm,"name",t)},expression:"ticketForm.name"}})],1),s("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[s("el-input",{attrs:{placeholder:"请输入"},model:{value:e.ticketForm.phone,callback:function(t){e.$set(e.ticketForm,"phone",t)},expression:"ticketForm.phone"}})],1),s("el-form-item",{attrs:{label:"身份证号",prop:"card_no"}},[s("el-input",{attrs:{placeholder:"请输入"},model:{value:e.ticketForm.card_no,callback:function(t){e.$set(e.ticketForm,"card_no",t)},expression:"ticketForm.card_no"}})],1),s("el-form-item",{attrs:{label:"游玩日期",prop:"order_date"}},[s("el-col",{attrs:{span:24}},[s("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.ticketForm.order_date,callback:function(t){e.$set(e.ticketForm,"order_date",t)},expression:"ticketForm.order_date"}})],1)],1),s("el-form-item",{attrs:{label:"电子邮箱",prop:"email"}},[s("el-input",{attrs:{placeholder:"请输入"},model:{value:e.ticketForm.email,callback:function(t){e.$set(e.ticketForm,"email",t)},expression:"ticketForm.email"}})],1)],1)],1):e._e(),4==e.type?s("div",{staticClass:"ticketing-massage"},[s("p",{staticClass:"fenlei-title"},[e._v("填写手机号")]),s("el-form",{ref:"ticketform",attrs:{"label-position":"left",size:"mini",rules:e.ticketFormRules,model:e.ticketForm,"label-width":"70px"}},[s("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[s("el-input",{attrs:{placeholder:"请输入"},model:{value:e.ticketForm.phone,callback:function(t){e.$set(e.ticketForm,"phone",t)},expression:"ticketForm.phone"}})],1)],1)],1):e._e(),s("div",{staticClass:"group-vip-pay-box"},[s("div",{staticClass:"check-vip-pay flex-row flex-y-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.checkGroupVip,expression:"checkGroupVip"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.checkGroupVip)?-1<e._i(e.checkGroupVip,null):e.checkGroupVip},on:{change:function(t){var i=e.checkGroupVip,s=t.target,r=!!s.checked;if(Array.isArray(i)){var o=e._i(i,null);s.checked?o<0&&(e.checkGroupVip=i.concat([null])):-1<o&&(e.checkGroupVip=i.slice(0,o).concat(i.slice(o+1)))}else e.checkGroupVip=r}}}),e._v(" 团体会员支付 ")]),s("nav-bar",{directives:[{name:"show",rawName:"v-show",value:e.checkGroupVip,expression:"checkGroupVip"}],staticClass:"nav-choose-tab",attrs:{"tab-data":e.tabData}}),s("div",{directives:[{name:"show",rawName:"v-show",value:e.checkGroupVip,expression:"checkGroupVip"}],staticClass:"vip-card-box clearfix"},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.show_no_data,expression:"show_no_data"}],staticClass:"nodata"},[s("img",{attrs:{src:i("a797"),alt:""}}),s("span",[e._v("~~没有可用团体会员卡~~")])]),e._l(e.groupVipList,(function(t,i){return s("div",{key:i,staticClass:"vip-card-list fl"},[s("label",[s("group-vip-card",{attrs:{item:t}}),s("div",[s("input",{directives:[{name:"model",rawName:"v-model",value:e.checkGroupCode,expression:"checkGroupCode"}],attrs:{type:"checkbox"},domProps:{value:t.code,checked:Array.isArray(e.checkGroupCode)?-1<e._i(e.checkGroupCode,t.code):e.checkGroupCode},on:{change:function(i){var s=e.checkGroupCode,r=i.target,o=!!r.checked;if(Array.isArray(s)){var a=t.code,c=e._i(s,a);r.checked?c<0&&(e.checkGroupCode=s.concat([a])):-1<c&&(e.checkGroupCode=s.slice(0,c).concat(s.slice(c+1)))}else e.checkGroupCode=o}}})])],1)])}))],2),s("div",{directives:[{name:"show",rawName:"v-show",value:e.checkGroupVip&&!e.show_no_data,expression:"checkGroupVip && !show_no_data"}],staticClass:"vip-pay-result-desc"},[e._v(" 使用团体会员余额支付 "),s("span",[e._v(e._s(e.memberInfo.code))])])],1),s("div",{staticClass:"invoice-message"},[s("div",{staticClass:"inv-title"},[e._v("发票信息")]),s("div",{staticClass:"check-invoice flex-row flex-y-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.show_addInvoice,expression:"show_addInvoice"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.show_addInvoice)?-1<e._i(e.show_addInvoice,null):e.show_addInvoice},on:{change:function(t){var i=e.show_addInvoice,s=t.target,r=!!s.checked;if(Array.isArray(i)){var o=e._i(i,null);s.checked?o<0&&(e.show_addInvoice=i.concat([null])):-1<o&&(e.show_addInvoice=i.slice(0,o).concat(i.slice(o+1)))}else e.show_addInvoice=r}}}),e._v(" 需要开发票 ")]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.show_addInvoice&&e.invoice_info.title,expression:"show_addInvoice && invoice_info.title"}],staticClass:"invoice_info_show b-1px"},[s("span",{directives:[{name:"show",rawName:"v-show",value:1==e.invoice_info.type,expression:"invoice_info.type==1"}]},[e._v("电子发票")]),s("span",{directives:[{name:"show",rawName:"v-show",value:2==e.invoice_info.type,expression:"invoice_info.type==2"}]},[e._v("纸质发票")]),s("span",[e._v(e._s(e.invoice_info.title))]),s("span",[e._v(e._s(e.invoice_info.identity_number))]),s("span",[e._v(e._s(e.invoice_info.content))]),s("span",[e._v(e._s(e.invoice_info.email))])]),s("p",{staticClass:"desc"},[e._v("智慧卡支付不开发票，开企业抬头发票必须填写纳税人识别号，以免影响报销。")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"coupon-box"},[s("p",{staticClass:"fenlei-title"},[e._v("优惠")]),s("el-radio-group",{model:{value:e.radio2,callback:function(t){e.radio2=t},expression:"radio2"}},[s("el-form",[s("el-form-item",[s("el-radio",{attrs:{label:3}},[e._v("赠送价值20元智慧卡")])],1),s("el-form-item",[s("el-radio",{attrs:{label:4}},[e._v("乐享优惠9.5折")])],1)],1)],1)],1),1==e.type?s("div",{staticClass:"Shortage"},[s("p",{staticClass:"fenlei-title"},[e._v("缺货处理")]),e._l(e.shortage,(function(t,i){return s("div",{staticClass:"flex-row Shortage-list flex-y-center",model:{value:e.vModelshortage,callback:function(t){e.vModelshortage=t},expression:"vModelshortage"}},[s("input",{attrs:{type:"radio",name:"Shortage"},domProps:{value:i}}),e._v(" "+e._s(t)+" ")])}))],2):e._e(),s("div",{staticClass:"b-1px-t count-price-box"},[s("p",[e._v("共 "+e._s(e.getCartList_allCount_totalPrice.count)+" 件商品，总商品金额"),s("span",[e._v("¥"+e._s(e._f("getPrice")(e.getCartList_allCount_totalPrice.totalPrice)))])]),3!=e.type&&4!=e.type&&e.checkDiscount?s("p",[e._v("（团体折扣已优惠"),s("span",[e._v("¥ "+e._s(e.reduceDiscountAmount))]),e._v("） ")]):e._e(),3!=e.type&&4!=e.type?s("p",[e._v("运费"),s("span",[e._v("+¥ "+e._s(e.getCartList_allCount_totalPrice.total_freight))])]):e._e(),3!=e.type&&4!=e.type&&0<e.getCartList_allCount_totalPrice.total_coupon?s("p",[e._v("优惠券"),s("span",[e._v("-¥ "+e._s(e.getCartList_allCount_totalPrice.total_coupon))])]):e._e()]),s("div",{staticClass:"b-1px-t-dashed count-price-box userinfo"},[s("p",[e._v("应付商品总金额"),s("span",{staticClass:"mainred"},[e._v("¥"+e._s(e._f("getPrice")(e.getCartList_allCount_totalPrice.totalPrice+e.getCartList_allCount_totalPrice.total_freight-e.getCartList_allCount_totalPrice.total_coupon)))])]),1==e.type?s("p",[e._v("收货地址"),s("span",[e._v(e._s(e.userAddress.province)+e._s(e.userAddress.city)+e._s(e.userAddress.district)+e._s(e.userAddress.address))])]):e._e(),1==e.type?s("p",[e._v("联系方式"),s("span",[e._v(e._s(e.userAddress.contact_name)+" "+e._s(e.userAddress.contact_tel))])]):e._e()]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.checkGroupVip,expression:"checkGroupVip"}],staticClass:"group-vip-pay-password"},[s("div",{staticClass:"input-line"},[e._v("团体会员支付密码 "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.groupVipPassword,expression:"groupVipPassword"}],staticClass:"b-1px",attrs:{type:"password"},domProps:{value:e.groupVipPassword},on:{input:function(t){t.target.composing||(e.groupVipPassword=t.target.value)}}})]),s("router-link",{staticClass:"forgetpassword",attrs:{tag:"p",to:"/user/grouppass"}},[e._v("忘记密码?")])],1),3==e.type?s("el-button",{staticClass:"submit-btn fr",attrs:{loading:e.submitOrderLoading},on:{click:e.submitOrderTick}},[e._v(" 提交订单 ")]):4==e.type?s("el-button",{staticClass:"submit-btn fr",attrs:{loading:e.submitOrderLoading},on:{click:e.submitOrderWenYu}},[e._v(" 提交订单 ")]):s("el-button",{staticClass:"submit-btn fr",attrs:{loading:e.submitOrderLoading},on:{click:e.submitOrder}},[e._v(" 提交订单 ")]),s("sz-confirm",{attrs:{width:580},on:{"on-cancel":e.cancleAddInvoice,"on-confirm":e.confirmAddInvoice},model:{value:e.show_addInvoice_model,callback:function(t){e.show_addInvoice_model=t},expression:"show_addInvoice_model"}},[s("div",{attrs:{slot:"title"},slot:"title"},[e._v("新增发票信息")]),s("div",{staticClass:"add_body",attrs:{slot:"body"},slot:"body"},[s("div",{staticClass:"chooseList b-1px active",staticStyle:{"margin-bottom":"20px"}},[e._v("电子普通发票")]),s("p",[e._v("为相应环保，书城全面启动电子发票，电子发票是税务机关认可的有效收付款凭证，与纸质普通发票具有同等法律效力，可用于报销入账、售后维权等。 ")]),s("p",[e._v("图书类商品内容可选择开明细或图书，其他商品只能开明细。电子发票只有普通发票，如需专票请联系客服。 ")]),s("p",[e._v(" 智慧卡及团体卡在开卡时已开具发票，消费不再重复开票。 ")]),s("el-form",{ref:"invoice_info_form",staticClass:"addressForm",attrs:{model:e.invoice_info,rules:e.invoice_info_rules,"label-position":"left","label-width":"86px"}},[s("el-form-item",{staticClass:"el-form-item",attrs:{label:"发票抬头",prop:"title_type"}},[s("el-select",{attrs:{size:"mini",placeholder:"请选择"},model:{value:e.invoice_info.title_type,callback:function(t){e.$set(e.invoice_info,"title_type",t)},expression:"invoice_info.title_type"}},[s("el-option",{attrs:{label:"个人",value:"1"}}),s("el-option",{attrs:{label:"企业",value:"2"}})],1)],1),s("el-form-item",{staticClass:"el-form-item",attrs:{label:"输入抬头",prop:"title"}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入抬头"},model:{value:e.invoice_info.title,callback:function(t){e.$set(e.invoice_info,"title",t)},expression:"invoice_info.title"}})],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==e.invoice_info.title_type,expression:"invoice_info.title_type==2"}],staticClass:"el-form-item",attrs:{prop:"identity_number",label:"纳税人识别号"}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入纳税人识别号"},model:{value:e.invoice_info.identity_number,callback:function(t){e.$set(e.invoice_info,"identity_number",t)},expression:"invoice_info.identity_number"}})],1),s("el-form-item",{staticClass:"el-form-item",attrs:{label:"发票内容",prop:"content"}},[s("el-radio-group",{model:{value:e.invoice_info.content,callback:function(t){e.$set(e.invoice_info,"content",t)},expression:"invoice_info.content"}},[s("el-radio",{attrs:{label:"商品明细"}},[e._v("商品明细")]),s("el-radio",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],attrs:{label:"图书"}},[e._v("图书")])],1)],1),s("el-form-item",{staticClass:"el-form-item",attrs:{label:"手机号",prop:"phone"}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入手机号"},model:{value:e.invoice_info.phone,callback:function(t){e.$set(e.invoice_info,"phone",t)},expression:"invoice_info.phone"}})],1),s("el-form-item",{staticClass:"el-form-item",attrs:{label:"邮箱",prop:"email"}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入邮箱"},model:{value:e.invoice_info.email,callback:function(t){e.$set(e.invoice_info,"email",t)},expression:"invoice_info.email"}})],1)],1)],1)]),s("sz-confirm",{attrs:{"cancel-text":"首页","btn-text":"查看订单"},on:{"on-cancel":function(t){return e.$router.push({path:"/"})},"on-confirm":function(t){return e.$router.push({path:"/user/order"})}},model:{value:e.showPayOk,callback:function(t){e.showPayOk=t},expression:"showPayOk"}},[s("div",{attrs:{slot:"title"},slot:"title"},[e._v(" 团体卡会员支付 ")]),s("div",{staticClass:"pay-result",attrs:{slot:"body"},slot:"body"},[s("i",{staticClass:"el-icon-circle-check",staticStyle:{"font-size":"40px",color:"green"}}),s("p",[e._v("支付成功")])])]),s("sz-confirm",{attrs:{"cancel-text":"首页","btn-text":"查看订单"},on:{"on-cancel":function(t){return e.$router.push({path:"/"})},"on-confirm":function(t){return e.$router.push({path:"/user/order"})}},model:{value:e.showPayError,callback:function(t){e.showPayError=t},expression:"showPayError"}},[s("div",{staticClass:"pay-result",attrs:{slot:"body"},slot:"body"},[s("i",{staticClass:"el-icon-circle-close",staticStyle:{"font-size":"40px",color:"red"}}),s("p",[e._v("支付失败")])])]),s("sz-confirm",{attrs:{"cancel-text":"查看订单","btn-text":"确定"},on:{"on-confirm":e.confirmWeachatPay,"on-cancel":function(t){return e.$router.push({path:"/user/order"})}},model:{value:e.noticeWechatPay,callback:function(t){e.noticeWechatPay=t},expression:"noticeWechatPay"}},[s("div",{attrs:{slot:"title"},slot:"title"},[e._v(" 团体卡会员支付 ")]),s("div",{staticClass:"pay-result",attrs:{slot:"body"},slot:"body"},[s("p",[e._v("订单总金额:￥"+e._s(e.order_item_result.all_total_amount))]),s("p",[e._v("团体会员已支付支付金额:￥"+e._s(e.order_item_result.all_already_amount))]),s("p",[e._v("订单剩余支付金额:￥"+e._s(e._f("getPrice")(e.order_item_result.all_total_amount-e.order_item_result.all_already_amount)))]),s("p",[e._v("订单剩余支付金额请使用微信支付或智慧卡支付")])])]),s("sz-confirm",{on:{"on-confirm":e.confirmAddAddress},model:{value:e.showAdd,callback:function(t){e.showAdd=t},expression:"showAdd"}},[s("div",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(1===e.titleType?"新增收货地址":"修改收货地址"))]),s("div",{attrs:{slot:"body"},slot:"body"},[s("el-form",{ref:"form",staticClass:"addressForm",attrs:{model:e.formUserData,"label-position":"left","label-width":"70px"}},[s("el-form-item",{staticClass:"el-form-item",attrs:{label:"姓名"}},[s("el-input",{attrs:{size:"mini",placeholder:"请输入姓名"},model:{value:e.formUserData.name,callback:function(t){e.$set(e.formUserData,"name",t)},expression:"formUserData.name"}})],1),s("el-form-item",{staticClass:"el-form-item",attrs:{label:"手机号"}},[s("el-select",{staticStyle:{width:"86px"},attrs:{size:"mini",placeholder:"请选择"},model:{value:e.phoneAreaValue,callback:function(t){e.phoneAreaValue=t},expression:"phoneAreaValue"}},e._l(e.phoneAreaOptions,(function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),s("el-input",{staticStyle:{width:"178px","margin-left":"15px"},attrs:{size:"mini",placeholder:"请输入手机号"},model:{value:e.formUserData.phone,callback:function(t){e.$set(e.formUserData,"phone",t)},expression:"formUserData.phone"}})],1),s("el-form-item",{staticClass:"el-form-item",attrs:{label:"所在地区",prop:"selectedAddressCode"}},[s("el-cascader",{staticStyle:{width:"100%"},attrs:{size:"mini",props:{expandTrigger:"hover"},options:e.AddressAreaOptions},on:{change:e.chooseAddressArea},model:{value:e.selectedAddressCode,callback:function(t){e.selectedAddressCode=t},expression:"selectedAddressCode"}})],1),s("el-form-item",{staticClass:"el-form-item",attrs:{label:"详细地址",prop:"address"}},[s("el-input",{attrs:{size:"mini",placeholder:"详细地址"},model:{value:e.formUserData.address,callback:function(t){e.$set(e.formUserData,"address",t)},expression:"formUserData.address"}})],1),s("el-form-item",{attrs:{label:"默认地址"}},[s("el-switch",{model:{value:e.formUserData.is_default,callback:function(t){e.$set(e.formUserData,"is_default",t)},expression:"formUserData.is_default"}})],1)],1)],1)]),s("sz-confirm",{on:{"on-confirm":function(t){return e.deleteAddress(e.delAddressId)}},model:{value:e.showDelToast,callback:function(t){e.showDelToast=t},expression:"showDelToast"}},[s("p",{staticClass:"toast-text",attrs:{slot:"body"},slot:"body"},[e._v("确认删除此收货地址, 是否继续？")])])],1)}),[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",{staticClass:"headTop flex-row flex-y-center"},[i("li",{staticClass:"li1 flex-grow-0"},[e._v("商品")]),i("li",{staticClass:"li2 flex-grow-0"},[e._v("规格")]),i("li",{staticClass:"li3 flex-grow-0"},[e._v("单价")]),i("li",{staticClass:"li4 flex-grow-0"},[e._v("数量")]),i("li",{staticClass:"li5 flex-grow-0"},[e._v("小计")]),i("li",{staticClass:"li6 flex-grow-0"},[e._v("其他")])])}],!1,null,"f7076bfc",null);t.default=E.exports},a86e:function(e,t,i){"use strict";var s=i("2592");i.n(s).a},b398:function(e,t,i){},dd93:function(e,t,i){},e260:function(e,t,i){"use strict";var s=i("dd93");i.n(s).a}}]);